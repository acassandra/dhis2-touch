<div *ngIf="isLoading">
  <page-loading [loadingSize]="'large'" [loadingMessage]="loadingMessage"></page-loading>
</div>
<div *ngIf="!isLoading">
  <!--programStageSections : {{ programStage.programStageSections |json }}<br><br>-->
  <div *ngIf="tableLayout" class="over-flow-container">
    <table class="table table-bordered" width="100%" >
      <thead *ngIf="tableLayout && tableLayout.headers">
      <tr >
        <th *ngFor="let header of tableLayout.headers" >{{ header}}</th>
      </tr>
      </thead>
      <tbody *ngFor="let row of tableLayout.rows;let currentIndex = index">
        <tr [ngStyle]="{'background-color': editableRow == currentIndex ? '#B9FFB9' :'#F4F4F4' }" (click)="openProgramStageEventEntryForm(currentIndex)">
          <td *ngFor="let data of row">
            {{ data }}
          </td>
        </tr>
        <tr *ngIf="editableRow == currentIndex">
          <td colspan="100%" >
            <tracker-event-container
              [programStage]="programStage"
              [currentUser]="currentUser"
              [(currentOpenEvent)]="currentEvents[currentIndex]"
              [isOpenRow]="'true'"
              (onChange)="updateData($event)"></tracker-event-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div *ngIf="shouldAddNewEvent" >
    <div class="item-card-with-no-margin">
      <tracker-event-container
        [programStage]="programStage"
        [currentUser]="currentUser"
        [(currentOpenEvent)]="currentOpenEvent"
        [isOpenRow]="'false'"
        (onChange)="updateData($event)"></tracker-event-container>
    </div>
  </div>

  <div *ngIf="programStage.repeatable" class="item-card" color="font-color" padding-top padding-bottom ion-button clear text-center text-capitalize icon-start>
    <ion-icon name="ios-arrow-back-outline" ></ion-icon>
  </div>

  <div *ngIf="programStage.repeatable" class="item-card" color="font-color" padding-top padding-bottom ion-button clear text-center text-capitalize icon-start>
    <ion-icon name="ios-arrow-forward-outline" ></ion-icon>
  </div>

  <div *ngIf="programStage.repeatable" class="item-card" (click)="addAnotherEvent(currentOpenEvent)" color="font-color" padding-top padding-bottom ion-button clear text-center text-capitalize icon-start>
    <ion-icon name="add" color="icon-color"></ion-icon>
    Add
  </div>



</div>
